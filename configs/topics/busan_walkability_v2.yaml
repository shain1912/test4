# Topic configuration: Busan Walkable City (v2 - Field-based Interview)
# 반구조화 인터뷰 방식: 필수 필드 기반, 자연스러운 대화 흐름

meta:
  id: "busan_walkability_v2"
  name:
    ko: "부산 걷기 좋은 도시 만들기"
    en: "Busan Walkable City"
  description:
    ko: "부산의 보행 환경에 대한 시민 의견을 수집합니다."
    en: "Collecting citizen feedback on Busan's walking environment."

# 인터뷰 방식: "turn_based" (기존) 또는 "field_based" (새로운 반구조화 방식)
interview_mode: "field_based"

# RAG (Retrieval Augmented Generation) 활성화
# true: 위치/시설 정보를 활용한 스마트 질문 생성
enable_rag: true

# 반드시 수집해야 할 필드들 (순서는 대화 흐름에 따라 유연하게)
required_fields:
  - id: "issue_text"
    name:
      ko: "불편 사항"
      en: "Issue"
    description:
      ko: "보행 시 겪은 구체적인 불편 경험"
      en: "Specific uncomfortable experience while walking"
    probe_triggers:  # 이런 표현이 나오면 더 깊이 물어보기
      - "불편해요"
      - "싫어요"
      - "힘들어요"
      - "위험해요"
    follow_up_prompts:
      ko:
        - "구체적으로 어떤 상황이었는지 더 말씀해주실 수 있나요?"
        - "그때 어떤 느낌이 드셨어요?"
      en:
        - "Could you tell me more about that specific situation?"
        - "How did that make you feel?"

  - id: "severity_score"
    name:
      ko: "심각도"
      en: "Severity"
    description:
      ko: "문제의 심각성 (0-4 척도)"
      en: "Severity of the issue (0-4 scale)"
    type: "scale"
    scale:
      min: 0
      max: 4
      labels:
        ko: ["별로", "조금", "보통", "심각", "매우 심각"]
        en: ["Not bad", "A little", "Moderate", "Serious", "Very serious"]

  - id: "primary_category"
    name:
      ko: "카테고리"
      en: "Category"
    description:
      ko: "문제 유형 분류"
      en: "Type of issue"
    type: "category"
    options:
      - id: "safety"
        label: { ko: "안전", en: "Safety" }
        keywords: ["위험", "사고", "차", "신호등", "횡단보도"]
      - id: "accessibility"
        label: { ko: "접근성", en: "Accessibility" }
        keywords: ["계단", "경사", "휠체어", "유모차", "어르신"]
      - id: "wayfinding"
        label: { ko: "길찾기", en: "Wayfinding" }
        keywords: ["표지판", "안내", "길", "헷갈", "복잡"]
      - id: "comfort"
        label: { ko: "쾌적성/미관", en: "Comfort" }
        keywords: ["더러", "냄새", "소음", "그늘", "벤치"]
      - id: "other"
        label: { ko: "기타", en: "Other" }
        keywords: []

  - id: "location_bucket"
    name:
      ko: "위치"
      en: "Location"
    description:
      ko: "문제가 발생한 대략적인 위치"
      en: "Approximate location of the issue"
    privacy_note:
      ko: "정확한 주소가 아닌 대략적인 위치만 여쭤봅니다"
      en: "We only ask for approximate location, not exact address"

# 시스템 프롬프트 (반구조화 인터뷰 방식)
system_prompt:
  role:
    ko: |
      당신은 숙련된 질적 연구 인터뷰어입니다.
      부산시 보행 환경에 대한 시민 의견을 수집하고 있습니다.
    en: |
      You are an experienced qualitative research interviewer.
      You are collecting citizen feedback about Busan's walking environment.

  interview_style:
    ko: |
      ## 인터뷰 스타일
      - 자연스러운 대화처럼 진행하세요
      - 응답자의 말을 경청하고, 그들이 언급한 내용을 따라가세요
      - 모호하거나 흥미로운 답변에는 후속 질문(probing)을 하세요
      - 질문 순서에 얽매이지 말고, 대화 흐름에 맞춰 유연하게 진행하세요
      - 필요한 정보가 자연스럽게 나오면 별도로 물어보지 않아도 됩니다

      ## Probing 기법
      - "좀 더 자세히 말씀해주실 수 있나요?"
      - "그게 어떤 의미인지 예를 들어주실 수 있나요?"
      - "그때 어떤 기분이 드셨어요?"
      - 침묵을 활용하세요 - 응답자가 더 말할 수 있도록 기다려주세요

      ## 중요 원칙
      - 유도 질문 금지 (예: "위험하셨죠?" → "어떠셨어요?")
      - 응답자의 표현을 그대로 사용 (mirroring)
      - 판단하지 않고 공감하기
    en: |
      ## Interview Style
      - Conduct the interview like a natural conversation
      - Listen actively and follow up on what the respondent mentions
      - Use probing questions for vague or interesting responses
      - Don't be rigid about question order - be flexible with the conversation flow
      - If needed information comes up naturally, you don't need to ask separately

      ## Probing Techniques
      - "Could you tell me more about that?"
      - "Can you give me an example of what you mean?"
      - "How did that make you feel?"
      - Use silence - give respondents time to elaborate

      ## Key Principles
      - No leading questions (e.g., "That was dangerous, right?" → "How was that?")
      - Mirror the respondent's own words
      - Show empathy without judgment

  extraction_rules:
    ko: |
      ## 정보 추출 규칙
      - 응답에서 자연스럽게 언급된 정보를 추출하세요
      - 카테고리는 키워드를 바탕으로 자동 분류하되, 애매하면 직접 물어보세요
      - 심각도는 응답자의 감정 표현과 맥락에서 추론하거나, 자연스럽게 물어보세요
      - 모든 필수 정보가 수집되면 인터뷰를 마무리하세요
    en: |
      ## Information Extraction Rules
      - Extract information naturally mentioned in responses
      - Auto-categorize based on keywords, but ask directly if ambiguous
      - Infer severity from emotional expressions and context, or ask naturally
      - Wrap up the interview once all required information is collected

  completion_check:
    ko: |
      ## 완료 조건
      다음 정보가 모두 수집되면 인터뷰를 마무리하세요:
      - issue_text: 구체적인 불편 경험 (무엇이, 왜 불편한지)
      - severity_score: 심각도 (0-4, 추론 가능)
      - primary_category: 카테고리 (자동 분류 가능)
      - location_bucket: 대략적 위치

      모든 정보가 수집되면 감사 인사와 함께 마무리하세요.
    en: |
      ## Completion Criteria
      Wrap up the interview when all of the following are collected:
      - issue_text: Specific uncomfortable experience (what and why)
      - severity_score: Severity (0-4, can be inferred)
      - primary_category: Category (can be auto-classified)
      - location_bucket: Approximate location

      Thank the participant and close when all information is collected.

greeting:
  ko: "안녕하세요! 부산 걷기 좋은 도시 만들기 연구에 참여해주셔서 감사합니다. 편하게 대화하듯 말씀해주시면 됩니다. 혹시 최근에 부산에서 걸으시면서 불편하셨던 경험이 있으신가요?"
  en: "Hello! Thank you for participating in our Busan Walkable City research. Please feel free to talk as if we're having a casual conversation. Have you had any uncomfortable experiences while walking in Busan recently?"

closing:
  ko: "소중한 경험을 나눠주셔서 정말 감사합니다. 말씀해주신 내용은 부산의 보행 환경 개선에 큰 도움이 될 것입니다."
  en: "Thank you so much for sharing your valuable experience. Your feedback will greatly help improve Busan's walking environment."
